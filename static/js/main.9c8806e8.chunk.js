(this.webpackJsonpgarage_opener_frontend=this.webpackJsonpgarage_opener_frontend||[]).push([[0],{21:function(e,t,r){var a=r(81),o=a,n=Function("return this")();o.exportSymbol("proto.garageopener.ChangeDoorStateRequest",null,n),o.exportSymbol("proto.garageopener.ChangeDoorStateResponse",null,n),o.exportSymbol("proto.garageopener.DoorState",null,n),o.exportSymbol("proto.garageopener.DoorState.State",null,n),o.exportSymbol("proto.garageopener.Empty",null,n),proto.garageopener.Empty=function(e){a.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.garageopener.Empty,a.Message),o.DEBUG&&!COMPILED&&(proto.garageopener.Empty.displayName="proto.garageopener.Empty"),a.Message.GENERATE_TO_OBJECT&&(proto.garageopener.Empty.prototype.toObject=function(e){return proto.garageopener.Empty.toObject(e,this)},proto.garageopener.Empty.toObject=function(e,t){var r={};return e&&(r.$jspbMessageInstance=t),r}),proto.garageopener.Empty.deserializeBinary=function(e){var t=new a.BinaryReader(e),r=new proto.garageopener.Empty;return proto.garageopener.Empty.deserializeBinaryFromReader(r,t)},proto.garageopener.Empty.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){t.getFieldNumber();t.skipField()}return e},proto.garageopener.Empty.prototype.serializeBinary=function(){var e=new a.BinaryWriter;return proto.garageopener.Empty.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.garageopener.Empty.serializeBinaryToWriter=function(e,t){},proto.garageopener.ChangeDoorStateRequest=function(e){a.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.garageopener.ChangeDoorStateRequest,a.Message),o.DEBUG&&!COMPILED&&(proto.garageopener.ChangeDoorStateRequest.displayName="proto.garageopener.ChangeDoorStateRequest"),a.Message.GENERATE_TO_OBJECT&&(proto.garageopener.ChangeDoorStateRequest.prototype.toObject=function(e){return proto.garageopener.ChangeDoorStateRequest.toObject(e,this)},proto.garageopener.ChangeDoorStateRequest.toObject=function(e,t){var r={password:a.Message.getFieldWithDefault(t,1,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.garageopener.ChangeDoorStateRequest.deserializeBinary=function(e){var t=new a.BinaryReader(e),r=new proto.garageopener.ChangeDoorStateRequest;return proto.garageopener.ChangeDoorStateRequest.deserializeBinaryFromReader(r,t)},proto.garageopener.ChangeDoorStateRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setPassword(r);break;default:t.skipField()}}return e},proto.garageopener.ChangeDoorStateRequest.prototype.serializeBinary=function(){var e=new a.BinaryWriter;return proto.garageopener.ChangeDoorStateRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.garageopener.ChangeDoorStateRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getPassword()).length>0&&t.writeString(1,r)},proto.garageopener.ChangeDoorStateRequest.prototype.getPassword=function(){return a.Message.getFieldWithDefault(this,1,"")},proto.garageopener.ChangeDoorStateRequest.prototype.setPassword=function(e){a.Message.setProto3StringField(this,1,e)},proto.garageopener.ChangeDoorStateResponse=function(e){a.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.garageopener.ChangeDoorStateResponse,a.Message),o.DEBUG&&!COMPILED&&(proto.garageopener.ChangeDoorStateResponse.displayName="proto.garageopener.ChangeDoorStateResponse"),a.Message.GENERATE_TO_OBJECT&&(proto.garageopener.ChangeDoorStateResponse.prototype.toObject=function(e){return proto.garageopener.ChangeDoorStateResponse.toObject(e,this)},proto.garageopener.ChangeDoorStateResponse.toObject=function(e,t){var r={success:a.Message.getFieldWithDefault(t,1,!1)};return e&&(r.$jspbMessageInstance=t),r}),proto.garageopener.ChangeDoorStateResponse.deserializeBinary=function(e){var t=new a.BinaryReader(e),r=new proto.garageopener.ChangeDoorStateResponse;return proto.garageopener.ChangeDoorStateResponse.deserializeBinaryFromReader(r,t)},proto.garageopener.ChangeDoorStateResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setSuccess(r);break;default:t.skipField()}}return e},proto.garageopener.ChangeDoorStateResponse.prototype.serializeBinary=function(){var e=new a.BinaryWriter;return proto.garageopener.ChangeDoorStateResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.garageopener.ChangeDoorStateResponse.serializeBinaryToWriter=function(e,t){var r;(r=e.getSuccess())&&t.writeBool(1,r)},proto.garageopener.ChangeDoorStateResponse.prototype.getSuccess=function(){return a.Message.getFieldWithDefault(this,1,!1)},proto.garageopener.ChangeDoorStateResponse.prototype.setSuccess=function(e){a.Message.setProto3BooleanField(this,1,e)},proto.garageopener.DoorState=function(e){a.Message.initialize(this,e,0,-1,null,null)},o.inherits(proto.garageopener.DoorState,a.Message),o.DEBUG&&!COMPILED&&(proto.garageopener.DoorState.displayName="proto.garageopener.DoorState"),a.Message.GENERATE_TO_OBJECT&&(proto.garageopener.DoorState.prototype.toObject=function(e){return proto.garageopener.DoorState.toObject(e,this)},proto.garageopener.DoorState.toObject=function(e,t){var r={state:a.Message.getFieldWithDefault(t,1,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.garageopener.DoorState.deserializeBinary=function(e){var t=new a.BinaryReader(e),r=new proto.garageopener.DoorState;return proto.garageopener.DoorState.deserializeBinaryFromReader(r,t)},proto.garageopener.DoorState.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readEnum();e.setState(r);break;default:t.skipField()}}return e},proto.garageopener.DoorState.prototype.serializeBinary=function(){var e=new a.BinaryWriter;return proto.garageopener.DoorState.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.garageopener.DoorState.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getState())&&t.writeEnum(1,r)},proto.garageopener.DoorState.State={OPENED:0,CLOSED:1,UNKNOWN:2},proto.garageopener.DoorState.prototype.getState=function(){return a.Message.getFieldWithDefault(this,1,0)},proto.garageopener.DoorState.prototype.setState=function(e){a.Message.setProto3EnumField(this,1,e)},o.object.extend(t,proto.garageopener)},35:function(e,t,r){var a={};a.web=r(86);var o={};o.garageopener=r(21),o.garageopener.GarageOpenerClient=function(e,t,r){r||(r={}),r.format="text",this.client_=new a.web.GrpcWebClientBase(r),this.hostname_=e},o.garageopener.GarageOpenerPromiseClient=function(e,t,r){r||(r={}),r.format="text",this.client_=new a.web.GrpcWebClientBase(r),this.hostname_=e};var n=new a.web.MethodDescriptor("/garageopener.GarageOpener/GetGarageDoorState",a.web.MethodType.SERVER_STREAMING,o.garageopener.Empty,o.garageopener.DoorState,(function(e){return e.serializeBinary()}),o.garageopener.DoorState.deserializeBinary);new a.web.AbstractClientBase.MethodInfo(o.garageopener.DoorState,(function(e){return e.serializeBinary()}),o.garageopener.DoorState.deserializeBinary);o.garageopener.GarageOpenerClient.prototype.getGarageDoorState=function(e,t){return this.client_.serverStreaming(this.hostname_+"/garageopener.GarageOpener/GetGarageDoorState",e,t||{},n)},o.garageopener.GarageOpenerPromiseClient.prototype.getGarageDoorState=function(e,t){return this.client_.serverStreaming(this.hostname_+"/garageopener.GarageOpener/GetGarageDoorState",e,t||{},n)};var i=new a.web.MethodDescriptor("/garageopener.GarageOpener/ChangeDoorState",a.web.MethodType.UNARY,o.garageopener.ChangeDoorStateRequest,o.garageopener.ChangeDoorStateResponse,(function(e){return e.serializeBinary()}),o.garageopener.ChangeDoorStateResponse.deserializeBinary);new a.web.AbstractClientBase.MethodInfo(o.garageopener.ChangeDoorStateResponse,(function(e){return e.serializeBinary()}),o.garageopener.ChangeDoorStateResponse.deserializeBinary);o.garageopener.GarageOpenerClient.prototype.changeDoorState=function(e,t,r){return this.client_.rpcCall(this.hostname_+"/garageopener.GarageOpener/ChangeDoorState",e,t||{},i,r)},o.garageopener.GarageOpenerPromiseClient.prototype.changeDoorState=function(e,t){return this.client_.unaryCall(this.hostname_+"/garageopener.GarageOpener/ChangeDoorState",e,t||{},i)},e.exports=o.garageopener},75:function(e,t,r){e.exports=r(91)},80:function(e,t,r){},91:function(e,t,r){"use strict";r.r(t);var a=r(0),o=r.n(a),n=r(9),i=r.n(n),s=(r(80),r(13)),g=r(48),p=r(123),c=r(138),u=r(139),l=r(137),m=r(64),d=r(149),f=r(141),S=r(143),h=r(130),O=r(148),E=r(140),b=r(142),D=r(145),y=r(49),C=r(32),v=r(126),w=r(128),R=r(129),B=r(21),j=r(35),G=o.a.createContext({garageOpenerService:new j.GarageOpenerClient("http://192.168.1.22:8080")});function z(e){return function(t){return o.a.createElement(G.Consumer,null,(function(r){return o.a.createElement(e,Object.assign({garageOpenerContext:r},t))}))}}var M=Object(p.a)((function(){return{root:{width:"100%"},icon:{fontSize:"20em"}}}));function x(e){var t,r=e.doorStatus,a=M(),n=(t={},Object(y.a)(t,B.DoorState.State.OPENED,{icon:v.a,text:"Closed"}),Object(y.a)(t,B.DoorState.State.CLOSED,{icon:w.a,text:"Open"}),t)[r]||{icon:R.a,text:"Unknown"};return o.a.createElement(h.a,{container:!0,className:a.root,direction:"column",alignItems:"center"},o.a.createElement(h.a,{item:!0},o.a.createElement(n.icon,{classes:{root:a.icon}})),o.a.createElement(h.a,{item:!0},o.a.createElement(C.a,{variant:"h2",component:"h2"},n.text)))}var F=z((function(e){var t=e.garageOpenerContext.garageOpenerService,r=Object(a.useState)(null),n=Object(s.a)(r,2),i=n[0],g=n[1],p=Object(a.useState)(B.DoorState.State.UNKOWN),c=Object(s.a)(p,2),u=c[0],l=c[1];return Object(a.useEffect)((function(){i&&i.on("data",(function(e){u!==e.getState()&&l(e.getState())}))}),[i,u]),Object(a.useEffect)((function(){!function e(t){var r=t.garageOpenerService,a=t.setStream,o=new Date;o.setSeconds(o.getSeconds()+1e5);var n=r.getGarageDoorState(new B.Empty,{deadline:o.getTime()});n.on("status",(function(e){console.log(e.code),console.log(e.details),console.log(e.metadata)})),n.on("error",(function(r){console.error(r),setTimeout((function(){e(t)}),1e3)})),n.on("end",(function(e){console.log("end")})),a(n)}({garageOpenerService:t,setStream:g})}),[t]),o.a.createElement(x,{doorStatus:u})})),P=r(144),T=r(50),k=r.n(T),N=r(62),W=r(3),_=r(131),I=o.a.createContext({setSnackbarOpts:function(){}});var q=Object(p.a)((function(){return{root:{}}}));var A,U=(A=z((function(e){var t=e.snackbarContext,r=e.garageOpenerContext,a=e.password,n=e.classes,i=q(),s=function(e){var t=e.snackbarContext,r=e.garageOpenerContext,a=e.password;return Object(N.a)(k.a.mark((function e(){var o,n,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.garageOpenerService,n=t.setSnackbarOpts,(i=new B.ChangeDoorStateRequest).setPassword(a),e.abrupt("return",new Promise((function(e,t){o.changeDoorState(i,null,(function(r,a){r?t(r):(console.log("Response",a),e(a))}))})).then((function(){n({open:!0,message:"Door has been updated!",severity:"success"})})).catch((function(e){n({open:!0,message:e.message,severity:"error"})})));case 5:case"end":return e.stop()}}),e)})))}({snackbarContext:t,garageOpenerContext:r,password:a});return o.a.createElement(_.a,{className:Object(W.a)(n.root,i.root),onClick:s,variant:"contained",color:"primary"},"Open/Close")})),function(e){return o.a.createElement(I.Consumer,null,(function(t){return o.a.createElement(A,Object.assign({snackbarContext:t},e))}))}),J=Object(p.a)((function(){return{root:{},buttonGrid:{width:"100%"},button:{width:"100%"}}}));function L(e){var t=e.setPassword;return function(e){t(e.target.value)}}function V(e){var t=J(),r=Object(a.useState)(""),n=Object(s.a)(r,2),i=n[0],g=n[1];return o.a.createElement(h.a,{className:t.root,container:!0,direction:"column",alignItems:"center",spacing:2},o.a.createElement(h.a,{item:!0},o.a.createElement(P.a,{required:!0,label:"Password",type:"password",variant:"outlined",autoComplete:"current-password",onChange:L({setPassword:g})})),o.a.createElement(h.a,{item:!0,className:t.buttonGrid},o.a.createElement(U,{classes:{root:t.button},password:i})))}var $=r(147),K=r(133),H=r(134),Y=r(135),Q=r(136);function X(e){var t=e.setIpAddress;return function(e){t(e.target.value)}}function Z(e){var t=e.setPort;return function(e){t(e.target.value)}}function ee(e){var t=e.open,r=e.setOpen,n=e.values,i=e.setValues,g=Object(a.useState)(""),p=Object(s.a)(g,2),c=p[0],u=p[1],l=Object(a.useState)(""),m=Object(s.a)(l,2),d=m[0],f=m[1],S=function(){r(!1)};return o.a.createElement($.a,{open:t,onClose:S},o.a.createElement(K.a,null,"Setup"),o.a.createElement(H.a,null,o.a.createElement(Y.a,null,"To enable communication to the garage opener, enter it's IP address in the below text box"),o.a.createElement(P.a,{autoFocus:!0,margin:"dense",label:"IP Address",defaultValue:n.ip,fullWidth:!0,onChange:X({setIpAddress:u})}),o.a.createElement(P.a,{autoFocus:!0,margin:"dense",label:"Port",defaultValue:n.port,fullWidth:!0,onChange:Z({setPort:f})})),o.a.createElement(Q.a,null,o.a.createElement(_.a,{onClick:S,color:"primary"},"Cancel"),o.a.createElement(_.a,{onClick:function(){i({ip:c,port:d}),S()},color:"primary"},"Save")))}var te=Object(p.a)((function(e){return{root:{marginTop:"1em"},menuButton:{marginRight:e.spacing(2)}}})),re=Object(g.a)("garageOpenerIp"),ae=Object(g.a)("garageOpenerPort");function oe(e){return o.a.createElement(D.a,Object.assign({elevation:6,variant:"filled"},e))}function ne(e){return function(t,r){"clickaway"!==r&&e({open:!1})}}function ie(e){var t=e.setGarageOpenerIp,r=e.setGarageOpenerPort,a=e.setGarageOpenerContextState;return function(e){var o=e.ip,n=e.port;t(o),r(n),a({garageOpenerService:o&&n?new j.GarageOpenerClient("http://".concat(o,":").concat(n)):void 0})}}var se=function(){var e=te(),t=Object(a.useState)(!1),r=Object(s.a)(t,2),n=r[0],i=r[1],g=re(null),p=Object(s.a)(g,2),D=p[0],y=p[1],C=ae(null),v=Object(s.a)(C,2),w=v[0],R=v[1],B=Object(a.useState)(null),z=Object(s.a)(B,2),M=z[0],x=z[1],P=Object(a.useState)({open:!1}),T=Object(s.a)(P,2),k=T[0],N=T[1],W=Object(a.useState)((function(){return{setSnackbarOpts:N}})),_=Object(s.a)(W,1)[0],q=Object(a.useState)((function(){return{garageOpenerService:D&&new j.GarageOpenerClient("http://".concat(D,":").concat(w))}})),A=Object(s.a)(q,2),U=A[0],J=A[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(G.Provider,{value:U},o.a.createElement(I.Provider,{value:_},o.a.createElement(c.a,{position:"static"},o.a.createElement(u.a,null,o.a.createElement(l.a,{edge:"start",onClick:function(e){x(e.currentTarget)},className:e.menuButton,color:"inherit"},o.a.createElement(E.a,null)),o.a.createElement(m.a,{anchorEl:M,keepMounted:!0,open:Boolean(M),onClose:function(){x(null)}},o.a.createElement(d.a,{onClick:function(){i(!0)}},o.a.createElement(f.a,null,o.a.createElement(b.a,{fontSize:"small"})),o.a.createElement(S.a,{primary:"Setup"}))))),D&&w?o.a.createElement(h.a,{className:e.root,direction:"column",container:!0,alignItems:"center",spacing:2},o.a.createElement(h.a,{item:!0},o.a.createElement(F,null)),o.a.createElement(h.a,{item:!0},o.a.createElement(V,null))):null,o.a.createElement(ee,{open:n,setOpen:i,values:{ip:D,port:w},setValues:ie({setGarageOpenerIp:y,setGarageOpenerPort:R,setGarageOpenerContextState:J})}))),o.a.createElement(O.a,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:k.open,autoHideDuration:6e3,onClose:ne(N)},o.a.createElement(oe,{onClose:ne(N),severity:k.severity||"info"},k.message)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[75,1,2]]]);
//# sourceMappingURL=main.9c8806e8.chunk.js.map